import{r,j as e}from"./index-CmXrzbuy.js";const x=()=>{const[s,c]=r.useState(null),[t,l]=r.useState(""),[p,d]=r.useState(!0),[n,i]=r.useState("");return r.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("preference_id");if(!a){i("No se encontró el preference_id en la URL."),d(!1);return}fetch(`http://localhost:8080/api/pagos/preferencia/${a}/pedido`).then(o=>{if(!o.ok)throw new Error;return o.json()}).then(o=>{c(o),l(o.estado)}).catch(()=>i("No se pudo obtener el estado del pedido.")).finally(()=>d(!1))},[]),p?e.jsx("div",{children:"Cargando información del pago..."}):n?e.jsx("div",{style:{color:"red"},children:n}):e.jsxs("div",{style:{maxWidth:400,margin:"2rem auto",padding:24,border:"1px solid #eee",borderRadius:8},children:[e.jsx("h2",{children:"Estado de tu pedido"}),e.jsxs("p",{children:[e.jsx("b",{children:"Estado:"})," ",t]}),s&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("b",{children:"N° Pedido:"})," ",s.idPedido]}),e.jsxs("p",{children:[e.jsx("b",{children:"Total:"})," S/ ",s.total]})]}),t==="CONFIRMADO"&&e.jsx("p",{children:"¡Pago exitoso! Tu pedido está confirmado."}),t!=="CONFIRMADO"&&e.jsx("p",{children:"Tu pago está en proceso o fue rechazado."})]})};export{x as default};
