import{r as n,j as o}from"./index-CmXrzbuy.js";const x=()=>{const[t,l]=n.useState(""),[c,p]=n.useState([]),[a,g]=n.useState(""),[r,i]=n.useState(null),[s,d]=n.useState(!1);n.useEffect(()=>{fetch("http://localhost:8080/api/cliente/listar").then(e=>e.json()).then(e=>p(e))},[]);const h=async()=>{d(!0),i(null);try{const e=await fetch("http://localhost:8080/api/pagos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idPedido:Number(t),idCliente:Number(a),monto:2,payerEmail:"cliente@correo.com"})});if(!e.ok)throw new Error("Pedido o cliente no encontrado, o error en el pago");const u=await e.json();i(u.paymentLink)}catch(e){alert(e.message)}d(!1)};return o.jsxs("div",{style:{maxWidth:400,margin:"2rem auto",padding:24,border:"1px solid #eee",borderRadius:8},children:[o.jsx("h2",{children:"Resumen de pago"}),o.jsxs("label",{children:[o.jsx("strong",{children:"Cliente:"}),o.jsxs("select",{value:a,onChange:e=>g(e.target.value),style:{width:"100%",marginTop:8,marginBottom:16,padding:8},children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),c.map(e=>o.jsxs("option",{value:e.id,children:[e.nombreCompleto," (",e.correo,")"]},e.id))]})]}),o.jsxs("label",{children:[o.jsx("strong",{children:"ID del Pedido:"}),o.jsx("input",{type:"number",value:t,onChange:e=>l(e.target.value),style:{width:"100%",marginTop:8,marginBottom:16,padding:8},placeholder:"Ingresa el ID de un pedido existente"})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Total a pagar:"})," S/ 2.00"]}),o.jsx("button",{onClick:h,disabled:s||!t||!a,style:{background:"#009ee3",color:"#fff",border:"none",padding:"12px 32px",borderRadius:6,fontSize:16,cursor:"pointer"},children:s?"Generando pago...":"Pagar con Mercado Pago"}),r&&o.jsx("div",{style:{marginTop:24},children:o.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:"#00bb6a",color:"#fff",padding:"10px 20px",borderRadius:6,textDecoration:"none",fontWeight:"bold"},children:"Ir a Mercado Pago"})})]})};export{x as default};
